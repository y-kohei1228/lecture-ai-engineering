# 勉強会・研修/ナレッジ/ZABBIX概論
# ID: 2155464
# 作成者: 篠塚　章宏
# 作成日時: 2022-09-25T02:24:19Z
# 更新日時: 2022-09-25T02:24:19Z

#ZABBIX概論
* 対象：運用業務に関連する方
* 難易度：やさしい
* 記載日（最終更新）：2022/9/25

##【はじめに】
本ページはZABBIXについて学ぶページとなっております。
主に運用・監視業務で用いられるソフトウェアとなっており
実際に見たことある方もいるのではないでしょうか。
そんなZABBIXについてどのように動いているのかを少しだけ理解できるのが本ページです。
##【監視の基本】
まず、監視というのは一体何かというところから知っていきましょう。
「監視」は主にサービスの正常性を担保するために必要な工程となっており、障害検知時に迅速な対応を行うのに欠かせないものとなっています。
たとえば「エラーでサービスが停止した」「ハードウェアが故障してサーバが停止した」といった状況が起きた際に監視していないと
利用者のクレームで障害が発覚するといった事態が起きます。
このような障害の発覚の仕方が起きるとみ○ほ銀行のようにニュースになってしまうなど、社会的な影響が起きたります。
とはいえ「障害」というものは絶対起きてしまうものです。サーバにも耐用年数というものが存在し、熱暴走によって想定しない挙動がおきたりします。
このような「障害」が発生した場合、迅速に対応できるようにするにに必要な工程の一つとして「監視」があります。
ITパスポートでも出てきたMTBF（平均故障感覚）やMTTF（平均故障時間）とMTTR（平均復旧時間）の関係がこの「監視」という業務で出てきます。

サーバの故障やサービスの停止など「障害発生」が起きてから連絡を受けるまでの「障害検知」の時間を縮めることができるのは
監視を行っているからといっても差し支えないでしょう。監視がいない場合、障害が発生してから把握するまでの時間は現場や担当者によって
大きくブレてしまう要因となってしまいますが、監視を行うことで「障害発生」に気づくことができるということです。

では監視を行う上で人力で行っているのかというとそうではありません。
実際に人力で監視を行うというのは現実的ではありません。
まず、システムは24時間365日稼働しているものがほとんどです。中には業務開始時にサーバ起動、業務終了時にサーバを停止という
特殊運用をしているところもあるかもしれませんが、基本的には四六時中稼働しっぱなしです。
24時間張り付きで監視を行うということは3交代、2交代制を採用してシフトを組む必要があります。
このように8時間3交代制を取ると人件費がそれなりに大きくなってしまいます。メリットとしては担当者が夜間に出社しなくても対応可能というのが
ありますが、よっぽど大きな企業でなければ現実的な案とは言い切れないです。
加えて常にサーバーにログインして状態確認を行うというのも現実的ではないでしょう。
現代のシステムは大規模化/冗長化を行う傾向にあり、実際に稼働する時はとてつもない数のサーバが一つのシステムを
稼働させるために構築されたりします。加えて常にログインセッションを張っているとネットワークのリソースがログイン維持のために使われ
サーバのメモリやCPUはサービス稼働のために利用可能な領域が減ってしまいます。相対的に障害発生の原因にもなりかねません。
上記の理由から、大規模システムの監視を行う際に、一台一台常に人力で監視するのは到底無理だというのは容易に想像できるでしょう。

そのようなシステムを監視するために昨今登場してきているのが「監視ツール」になります。
監視ツールにもさまざまな種類がありますが、私が実際に目にしてきたものをあげると
【ハードウェア監視ツール】と【統合監視ソフトウェア】の2種類があります。

ハードウェア監視ツールとはサーバ自体に搭載されている半導体に組み込まれているものであり、サーバ自身がサーバ内で稼働している
OSやサービスの監視を行うことができます。
このハードウェア監視ツールというものはサーバに搭載されていながらも独立しており、スタンドアロン環境で稼働する必要があるサーバを監視する際に
「サーバはネットワークから切り離されているが、ハードウェア監視ツールはネットワークに接続しているためセキュリティ要件を満たしやすい」といった
メリットがあります。

次に統合監視ソフトウェアですが、今回解説するZABBIXはこちらに該当します。
おもに同一ネットワーク上に存在するサーバを監視するためのソフトウェアでとなっており、社内で稼働しているサーバをまとめて監視するために利用されています。
このような統合監視ソフトウェアについて次の項で解説していきましょう。

##【統合監視というものについて】
統合監視ソフトウェアは同一ネットワーク上の大規模サービスを一括で監視することに向いているものとなっており、
コンソール一つで複数台のシステムを監視することができます。
使用方法として簡単に説明をすると監視をしたいサーバに対して監視用エージェントをインストールし、統合監視ソフトウェアが
インストールされているサーバと疎通が取れるようにすると監視が可能になっています。
エージェントが送信するモニタリング状況を監視サーバに送信し、WEB UIなどで表示をすることでCPU使用率やネットワークトラフィック状況を
コンソール上に表示する仕組みとなっています。
統合監視ソフトウェアを使用してモニタリングを行うことのメリットとしては
・同一構成のサーバ群を並行監視しやすく、異常があるサーバが分かりやすいため障害予兆の予測ができる。
・複数同時に障害発生した場合、どのサーバが問題ないかも見やすい
といった「同時に見れることで分かるデータが出てくる」といった独自のメリットがあります。
##【ZABBIXが選ばれる理由】
ZABBIXが選ばれている理由についてですが一番の理由は「監視対象の広さ」というものがあります。
メーカ製のものだと「Windowsに特化している」「Linux系に特化している」といった特徴がありますが、デメリットもあります。
ZABBIXの場合、背って項目次第ではオールマイティに監視することができるという特徴があり、サーバ以外にもロードバランサの
監視もできたります。

次に「設定項目を自由にできる」というものがあります。
メーカ製のものは「テンプレートを使う」という形式のものがほとんどで「この項目は監視しなくてもいい」といったものでも
アラートが飛んできたりします。また、メモリ使用率が閾値を越えたらアラートを飛ばすといった監視を想定している時に10%単位でしか
設定できないといったこともあります。
ZABBIXの場合だと「特定の項目は監視しない」「特定の項目だけ監視する」「特定の閾値を越えたらアラートを出す」といったような
設定が可能です。

そして最後に「ZABBIXエージェントを導入しなくても死活監視ができる」というのがあります。
大抵の監視ソフトは「監視用のエージェントをインストールする必要がある」といったものがほとんどであり、サーバによっては
エージェントがリソースを使ってしまうせいで障害が発生してしまうといったことが起きたります。
このような事態を避けるためハードウェア監視ツールを使用しているといった対応を取ることもできますが、致命的なエラーの場合はサーバ自体が
故障してしまうという可能性もあります。
そんな時は死活監視を行うといった手法がとられています。
ZABBIXエージェントではなくSNMPエージェントを使用してサーバの死活監視を行うという方法ですが、SNMPはSimple Network Management Protocolの
略称であり、これを利用してサーバから応答が返ってくるかどうかのみを監視するエージェントとなっています。
単純な「反応がある or ない」を検知するためサーバ停止などの致命的な障害の検知にも役に立ちます。
このSNMPについてですが、サーバだけでなくエージェントをインストールできないネットワーク機器などの監視も可能であり
ZABBIXの強みの一つとして挙げられています。

